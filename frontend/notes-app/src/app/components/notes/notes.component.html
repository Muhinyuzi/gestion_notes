<div class="notes-container">
  <h2>📝 Liste des notes</h2>

  <!-- BOUTON POUR CRÉER UNE NOTE -->
  <a routerLink="/notes/create" class="create-note-btn">➕ Créer une nouvelle note</a>

  <!-- FILTRES / RECHERCHE -->
  <div class="notes-filters">
    <input type="text" [(ngModel)]="searchTerm" placeholder="Rechercher un mot-clé...">
    <input type="text" [(ngModel)]="selectedAuteur" placeholder="Filtrer par auteur...">
    <select [(ngModel)]="sort">
      <option value="date_desc">Date décroissante</option>
      <option value="date_asc">Date croissante</option>
    </select>
    <button (click)="applyFilters()">Appliquer</button>
  </div>

  <!-- LISTE DES NOTES -->
  <ul class="notes-list">
    <li *ngFor="let n of notes">
      <a [routerLink]="['/notes', n.id]"><strong>{{ n.titre }}</strong></a> -<span [innerHTML]="sanitize(n.contenu)"></span>
      <div class="notes-meta">
        (Équipe : {{ n.equipe || '—' }}) — Auteur : {{ n.auteur?.nom || 'Inconnu' }}<br>
        📅 Créée le : <span class="created">{{ n.created_at | date:'short' }}</span>
        <span *ngIf="n.updated_at" class="updated">
          — Modifiée le : {{ n.updated_at | date:'short' }}
        </span>
        <span *ngIf="n.fichiers && n.fichiers.length > 0">📎 {{ n.fichiers.length }}</span>
      </div>
    </li>
  </ul>

  <!-- PAGINATION -->
  <div class="pagination">
    <button [disabled]="page === 1" (click)="goToPage(page - 1)">Précédent</button>
    <span>Page {{ page }} / {{ totalPages }}</span>
    <button [disabled]="page >= totalPages" (click)="goToPage(page + 1)">Suivant</button>
  </div>
</div>
