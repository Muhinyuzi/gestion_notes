<div class="utilisateurs-container">
  <h3>Liste des utilisateurs</h3>

  <!-- Filtres -->
  <div class="filters">
    <input type="text" [(ngModel)]="filterNom" placeholder="Filtrer par nom">
    <input type="text" [(ngModel)]="filterEmail" placeholder="Filtrer par email">
    <input type="text" [(ngModel)]="filterEquipe" placeholder="Filtrer par équipe">
  </div>

  <!-- Loader -->
  <div *ngIf="isLoading" class="loading">Chargement en cours...</div>

  <!-- Message d'erreur -->
  <div *ngIf="errorMessage" class="error">{{ errorMessage }}</div>

  <!-- Liste des utilisateurs -->
  <ul class="utilisateurs-list" *ngIf="!isLoading && !errorMessage">
    <li *ngFor="let u of filteredUsers">
      <a [routerLink]="['/utilisateurs', u.id]">{{ u.nom }}</a>
      <div class="utilisateurs-meta">
        {{ u.email }} — équipe : {{ u.equipe || 'Aucune' }}
      </div>
      <button (click)="editUtilisateur(u)">Éditer</button>
      <button (click)="deleteUtilisateur(u)">Supprimer</button>
    </li>
  </ul>

  <!-- Formulaire ajout / édition -->
  <h3>{{ isEditing ? 'Modifier utilisateur' : 'Ajouter un utilisateur' }}</h3>
  <form class="add-utilisateur-form" (ngSubmit)="isEditing ? updateUtilisateur() : addUtilisateur()">
    <input type="text" [(ngModel)]="formUser.nom" name="nom" placeholder="Nom" required>
    <input type="email" [(ngModel)]="formUser.email" name="email" placeholder="Email" required>
    <input type="password" [(ngModel)]="formUser.mot_de_passe" name="mot_de_passe" placeholder="Mot de passe" required>
    <input type="text" [(ngModel)]="formUser.equipe" name="equipe" placeholder="Équipe">
    <button type="submit">{{ isEditing ? 'Mettre à jour' : 'Ajouter' }}</button>
    <button type="button" *ngIf="isEditing" (click)="resetForm()">Annuler</button>
  </form>
</div>
